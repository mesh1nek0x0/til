# routerについて
どのネットワークを経由してパケットを届けるか考えてくれる。

パケットを受け取って次へ送り出すデバイスでもあります。

ただし、次のネットワークまでしか考えない。

## ルータのポートの論理アドレス
ルータには接続できるポート（インタフェース）ごとに論理アドレスが割り振られます。

これはルータを介さずに他のネットワークへ通信へパケットを伝送できないためです。

あるネットワークから他のネットワークへ転送する際には、

各ネットワークの出入り口である各ポートに論理アドレスを設定しています。

## ルーティングテーブル
経路表です。当該の宛先にパケットを届ける時にどの経路が最適化の表です。

構成要素としては以下のとおり。

* 宛先のネットワーク
 * ルータが送信を行う場合、相手のホストは気にしなくてもよいのでネットワークだけ記載されている
* 次のルータ
 * 次のネットワークの論理アドレス
* 距離
 * ホップ数かな
* ポート
 * ルータの接続ポートのこと

### 宛先ネットワークの決め方
ルーティングテーブルに記載される宛先のネットワークアドレスは、

宛先IPアドレスとサブネットマスクの情報からAND演算を行って算出しています。

このネットワークアドレスが判明することで、パケットを送出するルータのポートが判明します。

なお、ルーティングテーブルで一致しなかった場合、宛先不明としてパケットを破棄します。

### ルーティングテーブルのサンプル
次の状況を想定して下さい
* 自身のPCは192.168.0.0というネットワークに属している
* 192.168.0.0のネットワークのデフォルトゲートウェイは192.168.0.1
* 自身のPCに192.168.0.2というIPアドレスが割り当てられている

このときルーティングテーブルの状況
* 宛先が127.0.0.0ネットワーク宛や、192.168.0.2宛てのパケット
 * 自分自身を指すため、ループバックアドレスを意味します。
* 宛先が192.168.0.0ネットワーク宛ての場合
 * 自分が所属するネットワークなので、ルータを使わないので宛先はどこでもいい。
* 192.168.0.255/32宛てとなっている場合
 * ホストが255のため、ブロードキャストです。
* 0.0.0.0ネットワーク宛て
 * これはすべてのネットワークという意味になり、該当しないネットワークのデフォルトゲートウェイ(192.168.0.1)宛てとなります。
 * このルートはデフォルトルートという
