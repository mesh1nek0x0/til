# プロトコルと帯域幅
## プロトコルとは
やりとりを行う両者の暗黙的了解。ルール。

e.g. 日本人と話すときは日本語で話すし、子供と話すときはわかりやすい言葉を使うとかね。

インターネットのやりとりはTCP/IPが主流。うんうん。

## 帯域幅
言葉でわかりやすくいうなら伝送速度です。帯域が広いほど高速。ただし、スピートが早いわけではなく

転送に使うための幅が広い、ということです。イメージするなら一車線と二車線の道路がわかりやすい。

1bit1bitの転送速度が早くなるわけではないので、誤解してはいけない。

### ブロードバンド・ナローバンド
帯域（バンド）がブロード（広い）のかナロー（狭い）のか。
ADSL, ISDNとかもはや懐かしいね。


# ネットワークモデル
## OSI参照モデル
ISOが作ったネットワークのモデル。モデルというと仰々しいが、簡単にいうと役割表である。

たとえばあなたは恋人へ手紙を書くとしよう。
* あなたは
 * 内容を書く必要がある
 * 宛先を正しく記載する必要がある
 * 投函する必要がある
* 郵便屋さんは
 * 正しくふり分ける必要がある
 * 輸送する必要がある

インターネットの通信において、それぞれの段階での役割を7層に分けて定義したのがOSI参照モデル。
* アプリケーション
 * アプリケーション固定の規定があります。L7スイッチとか耳にしますね。
* プレゼンテーション
 * 文字コードやデータの表現形式。text/html?json?javascript?
* セッション
 * 通信プログラム間のセッションの開始・維持・終了を規定。

ここまでふんわり覚えておくとよいらしい。

* トランスポート
 * TCP/UDPでデータ転送における信頼性を規定。L4スイッチ（ポートによる振り分け）。
* ネットワーク
 * データの伝送ルートについて規定。L3スイッチ（IPによる振り分け）
* データリンク
 * 直接的に接続されたノード間の規約。L2スイッチ（MACアドレスによる振り分け）
* 物理
 * ビット列を電気信号にするときの規約。

## データユニット
各層でのデータと付加情報のセットの総称である。

たとえば、宅配便でワレモノを送付する際緩衝材でつつむと思うが、包んでも荷物は荷物である。ちょっとわかりにくいか。

L7~L5までは特に元のデータに制御用のデータはつかないが、

* セグメント
 * L4でどのポートだよ〜という情報がつくとデータユニットはセグメントと呼ばれる。
* パケット
 * L3でどのIPだよ〜という情報がつくとデータユニットはパケットと呼ばれる。パケット料金とはこのことなのか、なるほど。
* フレーム
 * L2でMACアドレスが特定されると、データユニットはフレームという単位になります。ふむふむ。
* ビット
 * L1で電気信号に変換されますが、この際のデータユニットはビットという単位になります。oh,yes.

ネットワークでのやりとりは順番通りにこの付加情報をつける→はずすとすることで、データのやりとりができているんだよー！

# LANにまつわる機器
ホスト（PC）とケーブル（ネットワーキングメディア）、それからNIC（ネットワークインターフェースカード）が必要。

今は標準でマザーボードに組み込まれているし、拡張スロットを使うのはなさそう。無線は昔使ってたなぁ。

## ネットワーキングメディア
ざっくりいうとLANケーブルの話です。ケーブルの規格は主に3つの団体が協力して取り決めていて、3種類のケーブルを作っているそうな。

* 団体
 * IEEE, EIT/TIA, UL(製品の安全性担保)
* ケーブル
 * 同軸
 * ツイスト
 * 光ファイバー

## IEEEでの各ケーブルの細かい規定の見方
10BASE5とか10BASE-Tとかなんや、タイラントか...って思ってました。フォーマットとしては

（データ転送量）（転送方式）（最長距離｜ケーブルのタイプ）

* データ転送量
 * 何Mbpsか。バトルプログラマー白瀬ではない。
* 転送方式
 * LANではベースバンド方式（デジタル信号）のBASEがつく。他にはブロードバンド方式（アナログ信号）がある（※高速という意味ではない）。
* 最長距離|ケーブルのタイプ
 * 数値なら最長距離を示します。ただし、単位は100m。距離は書いてないのもある、いい加減。
 * Tがつくものはツイストペア、他は光ファイバー


### 同軸ケーブル
　銅線をプラスティックの絶縁体がつつみ、電波干渉を防ぐシールドがあり、一番外側にプラスティックの皮膜がある。現在は主流でない。

* シールドのおかげで干渉に強い
 * 長距離向き
* シールドがある分硬い
* シールドがある分高い

e.g. 10BASE5, 10BASE2

### ツイストペアケーブル
　芯となる銅線をプラスティックコーティングした８本の細い銅線を、２本ずつ４組のお互いを交互により合わせている。なのでツイストペア。

２本ずつよりあわせることでお互いの磁場を打ち消しあう、また他からの干渉も消滅させる（キャンセレーション）効果がある。ただし、シールドほどの効果はないとのこと。ふむふむ。

シールドの有無で２種類ある
* Un-shield Twist Pear
 * 安い、短距離向け、柔らかい
* Shield Twist Pear
 * 高い、長距離向け、硬い

e.g. 10BASE-T, 100BASE-TX, 1000BASE-T

### 光ファイバー
　芯にガラスを使っている。電気信号ではなく光信号のため一切電磁的干渉を受けない上に高速である。すげぇ。昔は光に憧れたものである。

ただやっぱりガラスなので曲げに弱かったり、そもそも他のケーブルに比べて脆いため、敷設コストがかかる模様。今じゃすっかり普及しましたね。

e.g. 100BASE-FX, 1000BASE-SX, 1000BASE-LX

## ネットワーキング・デバイス
通信を制御するための機器のこと。L1~ L3までそれぞれの制御の役目があります。

* L1
 * 電気信号の増幅や分配を行う。リピータやハブがこれにあたる。
* L2
 * データを通す・通さないの制御を行う。ブリッジやスイッチがこれにあたる。
* L3
 * 宛先の制御をおこなう。ルーターがこれにあたる。

 そもそも信号にはアナログとデジタルがある。一般電話回線（アナログ）でデジタル通信を行う場合はモデムが必要なる。 モデムはModulator（変調） Demodulator（復調）の略だそうです。

 ADSLはアナログ回線に、デジタル信号を乗せて通信しているらしいへぇ。余った回線を使い回すのは利口な策ですね。

### L1の話
物理的な電気信号なので、減衰したりノイズで壊れることもある。

### リピータ
　どんなにシールドをつけても抵抗による減衰は距離に応じて増加するため、最長距離が決まってしまう。

弱まったりノイズが入ったりした信号を増幅や整形して、元の強さ・形に整形して元の状態に戻す役目がある。ただし、それだけ！それ以外はしない。

### ハブ
　別名マルチポートリピータ、要するにリピータで。
USBハブがイメージしやすいですが、複数のケーブルを差し込めるのハブです。ただ、たくさんつなぐことはできてもあくまでリピータでしかないため、来た信号はすべての端末に流してしまう...。

この衝突の影響範囲は衝突ドメインというらしい。なんでもカタカナにすればいいってもんじゃないけど、パッとイメージつきやすいよね。

### 同時接続制限
リピータやハブは、増幅の際に多少時間がかかってしまうため多重化すると遅延時間が多くなりすぎるため、ケーブルごとに同時に使える数に制限があるそうな。

# ネットワークとトポロジ
つながりと配置についての話。

ネットワークにおけるトポロジというのは2つの図形を使った配置図です。ノードとリンクという図形があります。さらに物理的なトポロジと論理的なトポロジの2種類があります。

* ノード
 * コンピュータやハブといったネットワーキングデバイスを指す。
* リンク
 * ケーブルなどのネットワーキングメディアを指す。

## 物理的なトポロジ
* バス型
 * リンクが１本の母線から支線が伸びていて、その先にノードがある
* リング型
 * 名前の通りノードとリンクが円状に繋がっている。
 * 信号の方向は一方向です。
* スター型
 * 最近の主流
 * 中央のノードからリンクが複数生え、星のようにノードがある。
* ツリー型
 * データベースのデータ構造でよく使われる。木構造。
* メッシュ型
 * すべてのノードが相互に直接接続されている。
 * リンクが増えすぎるため部分的に用いるパーシャルメッシュ型というのもある。

## 論理的なトポロジ
物理的な配置じゃなくて、データの流れから見た配置のことを論理トポロジという。

* リング型
 * データがノードを巡回する
* バス型
 * すべてのノードに伝送される

物理と論理で必ずしも同じトポロジ名にはならない点に注意する。

物理トポロジはスター型でも、データの動き的にはバス型である。
