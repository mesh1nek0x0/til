# Node.js概要

　サーバサイドのjsである

https://nodejs.org/en/
* イベントドリブン
* ノンブロッキングI/O
* Chrome's V8 JavaScript engine.
* エコシステム(npm)
* C10K問題の対処

---

# nodejsアプリの特徴
* メモリ消費が少ない
* サーバとクライアント間で入力値チェックなどを共通化できるらしい // イメージがわかない。jsだからか？
* サーバサイドの変更時に再起動が必要になりがちらしい
* リアルタイムが追求されるアプリに適している
  * SPA
  * WebSocketを利用するもの

---

# 用語
## ブロッキング・ノンブロッキングI/O
データ入出力について、待つ（ブロック）か待たないか（ノンブロック）。

// 電子レンジで温めつつ、会計するのかしないのか

データの入出力待ちで処理が一時的に止まってしまうため、ブロックという、たぶん。

* ブロッキング　　：1つ１つ処理が完了するまで、じっと待つ
* ノンブロッキング：進められるところはいちいち待たずに進めちゃう

同期・非同期I/Oとも。終わったらコールバック関数を実行する。

## C10K問題(シーテンケー)
C（Client）10K（1万台）に増えたら、
性能上の問題を通り越してサーバパンクしちゃう。

従来のさばき方だと、接続が増えれば増えるほどプロセスやスレッドが増え、コンテキストスイッチのオーバーヘッドに時間かかってしまう。

* ポート数の限界
* マルチスレッドもメモリ消費が激しい

cf. [nginxの紹介](http://www.slideshare.net/ttkzw/nginx-intro),

### コンテキストスイッチ
ざっくりいうと、複数のプロセスが1つのCPUを共有するための切り替え操作のこと。

// 人間も切り替えコストかかるよね

## イベントループ
マルチプロセス・スレッドでなくシングルスレッドでイベントを管理する

→ 大容量のDBアクセスなどによるI/Oや、ロジックでブロックが発生しやすい

ChromeV8エンジンで、ノンブロッキングを強制し、ブロックのないイベントループを実現

// 強制できちゃうあたり、たぶんChromeV8エンジンがすごい

## CommonJS
JSの規格。JavaScriptで汎用的なアプリケーションを作るためのAPI仕様。ライブラリとかそういうのではない。

node.jsもCommonJSに則って開発されているようだ。

※ここでいいう汎用的というのはモジュール化とかパッケージ化とか、I/O処理とかそこらへん。

## npm(node package manager)
nodejsでおなじみのパッケージ管理ツール。開発に便利なツールが手軽に導入できる。

// yumやapt-getにちかいイメージ

### bower
npmで入れられるパッケージ管理ツール。

npmもパッケージ管理ツールですが、bowerはブラウザ用のJSのパッケージ管理ツールらしい。

### browserify
node.jsとして書かれたjsをブラウザの方でも動かせるようにするものらしい。

// コンパイルするようなものか、有名らしいのでいつかお世話になるかも？

---

# 著名なフレームワーク
* Express
* Meteor

// 他にもAngularやBackboneが挙げられていたが、nodeのというよりか、jsのフレームワークでは？

---

# 参考
* [[Qiita]Node.js を5分で大雑把に理解する](http://qiita.com/hshimo/items/1ecb7ed1b567aacbe559)
* [[SlideShare]Node js 入門](http://www.slideshare.net/SatoshiTakami/intoroduction-nodejs)
* [[Qiita]npm とか bower とか一体何なんだよ！Javascript 界隈の文脈を理解しよう](http://qiita.com/megane42/items/2ab6ffd866c3f2fda066)
